(function(){angular.module("eatribApp",["ngRoute"]);function e(e){e.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"})}angular.module("eatribApp").config(["$routeProvider",e])})();(function(){angular.module("eatribApp").controller("homeCtrl",e);e.$inject=["$scope","eatribData","geolocation"];function e(e,o,t){var n=this;n.pageHeader={title:"EatRib",strapline:"Find places to eat near you in Ribadesella!"};n.sidebar={content:"Looking for a place to drink and eat in Ribadesella? EatRib helps you find places to have fun and eat premium quality food. Perhaps with sider, beer or coffe? Let EatRib help you find the place you're looking for."};n.message="Checking your location";n.loading=true;n.getData=function(e){var t=e.coords.latitude;var a=e.coords.longitude;n.message="Searching for nearby places";o.locationByCoords(t,a).success(function(e){n.message=e.length>0?"":"No locations found nearby";n.data={locations:e}}).error(function(e){n.message="Sorry, something's gone wrong";console.log(e)}).finally(function(){n.loading=false})};n.showError=function(o){e.$apply(function(){n.message=o.message;n.loading=false})};n.noGeo=function(){e.$apply(function(){n.message="Geolocation not supported by this browser.";n.loading=false})};t.getPosition(n.getData,n.showError,n.noGeo)}})();(function(){angular.module("eatribApp").service("geolocation",e);function e(){var e=function(e,o,t){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(e,o)}else{t()}};return{getPosition:e}}})();(function(){angular.module("eatribApp").service("eatribData",e);e.$inject=["$http"];function e(e){var o=function(o,t){return e.get("/api/locations?lng="+t+"&lat="+o+"&maxdist=2000000")};return{locationByCoords:o}}})();(function(){angular.module("eatribApp").filter("formatDistance",o);var e=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};function o(){return function(e){if(e>=1e3){return(parseFloat(e/1e3).toFixed(1)+" km").replace(".0","")}else{return parseFloat(e).toFixed(0)+" m"}}}})();(function(){angular.module("eatribApp").directive("ratingStars",e);function e(){return{restrict:"EA",scope:{thisRating:"=rating"},templateUrl:"/common/directive/ratingStars/ratingStars.template.html"}}})();